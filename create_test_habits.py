from app import create_app, db
from app.models import User, Habit

app = create_app()

def create_test_habits():
    with app.app_context():
        # –ù–∞–π–¥–µ–º –ø–µ—Ä–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        user = User.query.first()
        if not user:
            print("‚ùå –ù–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö!")
            return

        print(f"üë§ –ù–∞–π–¥–µ–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: {user.username}")

        # –ü—Ä–æ–≤–µ—Ä–∏–º, –µ—Å—Ç—å –ª–∏ —É–∂–µ –ø—Ä–∏–≤—ã—á–∫–∏
        existing_habits = Habit.query.filter_by(user_id=user.id).count()
        if existing_habits > 0:
            print(f"‚úÖ –£ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —É–∂–µ –µ—Å—Ç—å {existing_habits} –ø—Ä–∏–≤—ã—á–µ–∫")
            return

        # –°–æ–∑–¥–∞–µ–º —Ç–µ—Å—Ç–æ–≤—ã–µ –ø—Ä–∏–≤—ã—á–∫–∏
        habits_data = [
            ("–†–µ–≥—É–ª—è—Ä–Ω—ã–π —Å–æ–Ω", "–õ–æ–∂–∏—Ç—å—Å—è –∏ –≤—Å—Ç–∞–≤–∞—Ç—å –≤ –æ–¥–Ω–æ –≤—Ä–µ–º—è –¥–∞–∂–µ –≤ –≤—ã—Ö–æ–¥–Ω—ã–µ"),
            ("–í–æ–¥–∞ —Å —É—Ç—Ä–∞", "–í—ã–ø–∏—Ç—å —Å—Ç–∞–∫–∞–Ω –≤–æ–¥—ã —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏—è"),
            ("–ï–∂–µ–¥–Ω–µ–≤–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ", "30 –º–∏–Ω—É—Ç —Ö–æ–¥—å–±—ã, –∑–∞—Ä—è–¥–∫–∏ –∏–ª–∏ —Ä–∞—Å—Ç—è–∂–∫–∏"),
            ("–ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–Ω—è", "–°–æ—Å—Ç–∞–≤–∏—Ç—å –ø–ª–∞–Ω –Ω–∞ –¥–µ–Ω—å —É—Ç—Ä–æ–º"),
            ("–ò–∑—É—á–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ", "15-20 –º–∏–Ω—É—Ç –≤ –¥–µ–Ω—å –Ω–∞ –∏–∑—É—á–µ–Ω–∏–µ —á–µ–≥–æ-—Ç–æ –Ω–æ–≤–æ–≥–æ"),
            ("–í–µ—á–µ—Ä–Ω–∏–π —Ä–∏—Ç—É–∞–ª", "10 –º–∏–Ω—É—Ç –Ω–∞ –ø–æ–¥–≥–æ—Ç–æ–≤–∫—É –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –¥–Ω—é")
        ]

        for name, description in habits_data:
            habit = Habit(name=name, description=description, user_id=user.id)
            db.session.add(habit)

        db.session.commit()
        print(f"‚úÖ –°–æ–∑–¥–∞–Ω–æ {len(habits_data)} —Ç–µ—Å—Ç–æ–≤—ã—Ö –ø—Ä–∏–≤—ã—á–µ–∫ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è {user.username}")

if __name__ == '__main__':
    create_test_habits()